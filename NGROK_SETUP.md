# üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ngrok –¥–ª—è AdvancePay

## –ü—Ä–æ–±–ª–µ–º–∞ —Å bcrypt - –†–ï–®–ï–ù–ê ‚úÖ

### –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
```bash
cd backend
fix_bcrypt_and_test.bat
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
1. –£–¥–∞–ª–∏—Ç —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ bcrypt –∏ passlib
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –≤–µ—Ä—Å–∏–∏
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –†—É—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
```bash
pip uninstall -y bcrypt passlib
pip install bcrypt>=4.0.1
pip install passlib>=1.7.4
python create_test_user.py
```

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Backend —Å ngrok

### 1. –ó–∞–ø—É—Å–∫ Backend –Ω–∞ –ø–æ—Ä—Ç—É 8081
```bash
cd backend
uvicorn app.main:app --host 0.0.0.0 --port 8081
```

### 2. –ó–∞–ø—É—Å–∫ ngrok
```bash
ngrok http 8081
```

–í—ã –ø–æ–ª—É—á–∏—Ç–µ URL –≤–∏–¥–∞: `https://xxxx-xx-xx-xx-xx.ngrok-free.app`

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Android App

### –î–ª—è —ç–º—É–ª—è—Ç–æ—Ä–∞ (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ):
- URL: `http://10.0.2.2:8081/`
- –ü–æ—Ä—Ç –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ 8081 ‚úÖ
- –ü—Ä–æ—Å—Ç–æ —Å–æ–±–∏—Ä–∞–π—Ç–µ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ APK

### –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ò–∑–º–µ–Ω–∏—Ç—å –≤ –∫–æ–¥–µ (–æ–¥–∏–Ω —Ä–∞–∑)**

–û—Ç–∫—Ä–æ–π—Ç–µ: `app/src/main/java/com/advancepay/data/api/ApiService.kt`

–ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
```kotlin
private const val BASE_URL = "http://10.0.2.2:8081/"
```

–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞:
```kotlin
private const val BASE_URL = "https://your-ngrok-url.ngrok-free.app/"
```

–ó–∞—Ç–µ–º –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ APK:
```bash
cd AdvancePayApp
gradlew assembleDebug
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —á–∞—Å—Ç–æ –º–µ–Ω—è—Ç—å URL, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —ç–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç URL —Å–µ—Ä–≤–µ—Ä–∞.

---

## –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `fix_bcrypt_and_test.bat` –∏–ª–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ `create_test_user.py`:

```
–õ–æ–≥–∏–Ω: trader1
–ü–∞—Ä–æ–ª—å: test123
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ Backend:
```bash
# –í –±—Ä–∞—É–∑–µ—Ä–µ –∏–ª–∏ curl
curl http://localhost:8081/api/v1/auth/login -X POST \
  -d "username=trader1&password=test123"
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ ngrok:
```bash
curl https://your-ngrok-url.ngrok-free.app/api/v1/auth/login -X POST \
  -d "username=trader1&password=test123"
```

### 3. –í—Ö–æ–¥ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —ç–º—É–ª—è—Ç–æ—Ä–µ –∏–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
2. –í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω: `trader1`
3. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å: `test123`
4. –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏"

---

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ 8081:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ—Ä—Ç —Å–≤–æ–±–æ–¥–µ–Ω
netstat -ano | findstr :8081

# –ï—Å–ª–∏ –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç, —É–±–µ–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç
```

### ngrok –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É:
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω –ü–ï–†–ï–î –∑–∞–ø—É—Å–∫–æ–º ngrok
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ—Ä—Ç —Å–æ–≤–ø–∞–¥–∞–µ—Ç (8081)

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:
**–≠–º—É–ª—è—Ç–æ—Ä:**
- URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `http://10.0.2.2:8081/`
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `localhost` –∏–ª–∏ `127.0.0.1`

**–†–µ–∞–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok URL —Å `https://`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç

---

## –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—É–∂–µ —Å–¥–µ–ª–∞–Ω—ã):

‚úÖ Backend –ø–æ—Ä—Ç –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ 8081
‚úÖ Android App –ø–æ—Ä—Ç –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ 8081
‚úÖ bcrypt –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
‚úÖ create_test_user.py –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç 8081

–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `fix_bcrypt_and_test.bat` –∏ –≤—Å—ë –≥–æ—Ç–æ–≤–æ! üéâ
